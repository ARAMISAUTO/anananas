<?xml version="1.0" encoding="UTF-8"?>
<project name="rsync">	
	<!-- Mandatory targets -->
	<target name="configure" />
	<target name="build" />
	<target name="review" />
	<target name="migrate" />
	<target name="sync" depends="ssh" />

	<!-- Syncs your project files to a remote destination -->
	<!-- toolkit phase : sync -->
	<target name="ssh">
		<!-- Sanity checks -->
		<fail unless="remote.username" />
		<fail unless="remote.host" />
		<fail unless="remote.path.root" />

		<echo>Rsyncing to ${remote.username}@${remote.host}:${remote.path.root}</echo>
		<echo>rsync additional options : ${rsync.options}</echo> 
		
		<exec executable="rsync" failonerror="true">
			<arg line="--cvs-exclude 
              --exclude-from=${project.dirs.base}/etc/common/rsync.exclude
              --links
	      ${rsync.options}
              -agpvzc src/ -e ssh ${remote.username}@${remote.host}:${remote.path.root}" />
		</exec>
	</target>
	
</project>
